<div class="max-w-3xl mx-auto p-4">
  <h2 class="text-2xl font-bold mb-4">Order History</h2>

  <div *ngIf="loading" class="text-gray-500">Loading...</div>
  <div *ngIf="error" class="text-red-500">{{ error }}</div>

  <div *ngFor="let prompt of groupedOrders | keyvalue">
    <div class="border border-gray-300 rounded mb-4 p-4">
      <div class="flex justify-between items-center mb-2">
        <h3 class="font-semibold">{{ prompt.key }}</h3>
        <button
          (click)="confirmDelete('group', prompt.key)"
          class="text-sm text-red-600 hover:underline"
          [disabled]="deleting"
        >
          Delete Group
        </button>
      </div>
      <div *ngFor="let item of prompt.value" class="flex justify-between items-center border rounded p-2 mb-2">
        <div>
          <strong>{{ item.item }}</strong> Ã—{{ item.quantity }}
          <span class="text-sm text-gray-500">({{ item.notes }})</span>
        </div>
        <button
          (click)="confirmDelete('item', item.id)"
          class="text-xs text-red-500 hover:underline"
          [disabled]="deleting"
        >
          Delete
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Toast Notification -->
<div *ngIf="toastMessage" class="fixed bottom-4 right-4 px-4 py-2 rounded shadow-lg text-white"
  [ngClass]="toastType === 'success' ? 'bg-green-600' : 'bg-red-600'">
  {{ toastMessage }}
</div>

<!-- Confirmation Modal -->
<div *ngIf="showModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded shadow-md w-full max-w-sm">
    <h3 class="text-lg font-semibold mb-4">Are you sure you want to delete?</h3>
    <div class="flex justify-end gap-4">
      <button (click)="cancelDelete()" class="px-4 py-2 bg-gray-200 rounded">Cancel</button>
      <button (click)="proceedDelete()" class="px-4 py-2 bg-red-600 text-white rounded" [disabled]="deleting">
        {{ deleting ? 'Deleting...' : 'Yes, Delete' }}
      </button>
    </div>
  </div>
</div>
